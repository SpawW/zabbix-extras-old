<?php

/*
**  Objetivo: Inicializar o banco de dados do Zabbix-Extras
** Adail Horst - http://spinola.net.br/blog
**/
    $logo_zbxe = strtoupper("89504e470d0a1a0a0000000d494844520000008e0000001f0802000000bea562b9000000017352474200aece1ce90000000467414d410000b18f0bfc6105000000097048597300000ec300000ec301c76fa8640000001a74455874536f667477617265005061696e742e4e45542076332e352e313147f3423700001a23494441546843ed5b075853d9b6a6082858e8209004084d3a48530169766514c7ae5774ec6df48e6dbc6319751c0b76aaa880344550111010101529520444a40aa490501212484248e5ad938488885cdfbc37dffbdefbde9aff3bd9679fb5f73967fd7b957d70648442e1e0e02095ddd7c7660c700768ec3e069bd9cf83132695d5dbcb663107faeba938625f17b1afbbaab3e94d7bed271aa986d2f2a4f97521b13aa5f175daa7c2889ab4cb95f723abd3a23e6406952746d4a43eac7b1efd21031ab17559f71b72e3ea73a36bb31e35bd0aab7e1c53fbec4af98313c591274aa2ce96c60557a75cab4a3a5c1076aa24fa5c59fcb9d2f893c5772e94c78757a746d7662636bf0cae4c89ab7b9ed490974facca6c29a9a236bf21be2f21d59675d4bf25d765b494a47f2a4e6d2e2c443a3f94926beba8f87a1abeb3bf87c6e9a372fabad97426bf9f32d0dbd54feb19e8eb80fe81be9e81de163a8923e09199dddd0388029ed1d54823e6b695d6525a3e76b7b6f7515b689df4817ebe4000f619553822919cfc67046cded3d32339f96e91e17279f073aef84eb9f374a2a91ddec4166f6e5f676bdf6661d76469d768ef506d6df5dedab2c1d2fac534e3a269269936c6cfad8c734c516956a807f698500fe34837c3e71698740b54b625e6a935ea99854109065d62882e47a38b0c512f8cf433cd0d121c31a9b686b9588362235405065d6184c93547ddf434bee76c0897d22cd18fad51f14e48fba12d3ac6d9307c86f1556f6c9a3d36d90e1de5661832cbf8863736dcc3e4da6ce36817c35b6e46b1ce98dbae46d7bc4daefa989c9b6b72c1cfe4ba17f68a0ff6aa0f76d99ee9ca1173dc63a65b45792b84f8ca077b4f08f3530af51b17e2a31c36775c88af62b08f6288af42a88ffaad456ab716e8dcf69f143e5f397cae76d40f72615e9a7796a0eead70b8ffd39617172ac88d63509597f7c2c1ce352a2a5af06d9d110224959494f878cfd9be6db7a4ebbb4586c9ec879f9ff383aa7474898a1aff07b07bb5e5b830cfa0744cd7db09b7330d8c235de442bc6443bcbf0539693bd45b260481f854fbaeff0b7ca5d84ca34a6868c43cdf1d96e6ee0b172eeee8e890f47e5b783cdeb163c774b58d3c67ae5fb36abb389e7dbfc8d07b19f073f4e58d5a75ad11effcbf14bf2c9f261fea5df0529d5f212f2c93a3bd1d1f99a5677dd7457e382bff16a1de2ae17e39b872b19946955327cfcd9eb56196eb6a600b8b35abadad955c184d180cc6a2458bb43531ae4e01ee6e6bbc3d97ff45aa7e7b155caf3a822a7582a20641516b04888a9ac3d5da1535f14a9aa2fecf9d62b42b8026f44b3162a0b8f1598184e8ab0fd701e095e0a8d9aea0015709c80c5a430325103d24343e0fdcbed676dcb14dab4fadcf7b64c92f55e2552808cae5fb4a1513b2752def38c985f8006163fb991872a15e9008c5661a557e3f75c1c531c0d16eb19df50234ca4e5777eab7d8eaefeff7f6f69e3c49cbcadc0794a7db2f71b0f5fd8b54fde3d9898f5f7a1541491d8fb0a53a02885110f34940428e6a3825e8ffdc09d66c473ad5f14aaa527c4d0341490dafa82a054e494d64f42fa100932084899491e7212a6a4bd982067422ab4ae9f3e41e475cc66d3f241310342ee092ebeebd2f532c81aac132d9c132395685e2836c1da728a771df41957c98777a4bb1d84ca3cac9137fda58ceb334f731c37a181bbaaa4ed13732342293c96c361b87c3016dadadad2c160b28d9b0618382c20494be3dd6d0d5dcc4d3ca62ce5fa76aeda35f9a267f4155bb9b773f813040208ac116b539442235f20e6998d17128332eb18ddfd9419ce5031e26ed2728aab3aaaa789d9d52b0f1b8be67d98419be121d2535da85abfcce4e3110051289595edeb16d8f7429101cdc070878cab59b2405581f5a947b71f048a49f7f1962549dfce35a0e1e4f898bc32b7d7e78f7c34ef25b8e015500d9802b0acb2f9cb9b18057ae005489204b7fab1493ad3f33da513e64b65ce8ec110c49211fe695d9fa566ca651e5e9d30c57e739466817b4bea39eaeb5ba2a5a4b03636febe3603bd7c96191ab93bfabd35268cc745ba2a76b3669a2b6968699fe545bb4c174aca19b9fcfb2bf489567eca6a6895f7a958d5b5fca23664a2a809592da9bf278a0872a1c14f604870cf78faec3470542c1a040408bbc4318e66d4015b0cb653128e1b7a922d09ea4f2b95c76573741cb10d15152eb0dbd03b7a63f4eed1129f444c771bbbbb9023e69e94ac93cce5e505cf5c5c4828f8203114c6c06a8544e6f2fd1dc11b985be19a79dc0eda1e0cded8647c5e53b1c64371d175325137009201f703928640ee42d916fc98293f1cbe5b8650a4f73359626588f0f760762be0e891000730915222b8d2e757575a658475d6d2b355543bda9166ece01deee815e1e815ec38fa206f47bce5c6b663263ca64036d4d73206cfbb69f25b37cb748a8f28dded83ae1f3db0e076205250d72e0560197cb2cafc0ab19482f1194b458ef6b581f6a6959cfc164380dcce74b401591c0efeec429495c0d3f5eadefe1139e504076f7437a86a822792d102b404e226fde2a803dc7852049cf10551063e11408236ddcc617f0e9393984095ab407c97c3ebfeba76d23b2e092dd0e723ffd36441502b9654193575e68c84549d992027a706f276e4a9aa612360b293a4287b115ea195b9733f8eda5dfdcfc496d0a66d2443d23b4a3cfec757f9e0d4b884b0db919fbe3d25dce8e4b4785bdcd7c88931a6a261111b725b37cb748a8f2be17d834e90baf1a06cd764f3f2e83314022114c6dbfb08bc75c1e9fd77dfc6457e0168140d8b57987e82ae27312afeaeac44b7ad481727a6616bf9f4534b442c60e514546a852879c445452efdcfd4f3e5fd0b56db7c44bbea40a2607c7a5253de2f205d49447423e9f969c023dc35d0ab07e93b5fc0e245749211b70493620e8f4958582b27123a80208cb65f9e5f2356f26417d3fedee74d9502ff027380255d11fb3c6a04a2814cc9ce1ada365b26ecd9ea2c2f2ab9723cf9cbe16111e87c3112e9c0fb5b4f0b234f716c1c77a9a9f8da59ff5345f51629ba5acacdad2d22299e5bb4542d5c13b0744b5d628007ad81067584ca2cf7c58d7d2fe764575eaed68018f4330b727681af27a7be9af5f4b730650354024f0fa5994bbb1d4bbb194a8587afe2b2ef0f4d34e499c9406c0f42ceadd989e3bb13d0f1f71998ceeb844dc446df1245f518500af67028b00a26e3f9140d43395f64bb16eb38dfcce2fa812c3efc03e0192b146520500b604151018e506ca149273a1ee7014b1e579b7762caa400e1d3a626fe31d7b2fc9d4d80d6330dd04ebe6ebbd62edaa5def2aaa376dfc19d212c6c0c91833c310e50c0d50801e809bebecff6ca2029150b5fbe1e136e52fc28818040d7dd6bb0a1e5f40dab917b8197e09a781e2d27a7a0bde40f505c534fdfe433e8f47b475115f955035c0a6a7a7f589407ff992c7ee67d55413309648753e4415a3b0a8373d1d517896cde9ece0d268a4a52b4493a88f4e95ba417f6333bc28abb989a08192f64bb1e6273bb9ed4747f0049873e000bf4c690449c301390c12d88b7cf52509f6506e40f64afb5424b2d2372522e2d681fd471d3c67cd5ce9e4b2cc196b6fa7a36561673b7be3c65daf5e1569a89bea684dd3d6b4409bda382c709ab1d2d16a8ebdba9a89ff920029550d0d0d89890f52521e11894471cfb74442d5a1985fbef62ac8073dc9293c3e9f7a2304a2d3f08218ec48daba03821eb3b9b92f231b4abbbe9a3a9e40d07de98a38420e0b80505bc36608d90f91376c864cd37df926190977d25c05ce0a3eaa05753f0e63cea5d3588df5920cf7550084634fc82dbe40c0aaac02c7a24444220be5f35321f8619ba3dce62f72154076d99523170260533c9c1b4854c2a123b34cf1468681c51d17a8e3453c79ca877ae511de89acf44d795bfa3630708bb1a7597481edcb8fb3f69cf2dd7cc64e531fe3ece4555efe4e45596fb2aadefc2df63b4ffb27175be5d7db78ecb21bafa475f8c851184ba7d3b66ddde3eeb672c9bcbd8be7ee9ee51670f0e0312613a163549150b52576fff0fa4d04f5eeb3e7f9026eeff3e77869441201ac03601614f2d8ecbea4fb0c116849c91c1a8ddd4ec44fd24374be2a2b90a462ef2614f07a53d3919e51ca0a18a5c168ac13b059ad2aa23b7eed558b0220e4320a0a5a3550cc0f35021e8fe41f20da1a4b6600acd8e6201b28ad00453c055c515d7de6e373cc60d948aa062a94da8b55ae3d43eb45b842c493fd5cbb23192b173fd6d70a10d842ad5bb7415943fdcf2776b9557e4ece2e8f0b2d831ed960ed4c7372f29454a66c3d6f915febba7add92dfaf631f975b1a7b18caca2ae7e4e4f078bc654b57cff5d93ecbf5c7c50bd7bacff09fe7bb75f1bcbdab576dfed6276009551b1f1cc08dffe2853bd66f12f0f8ecae4e82f75cb2ad1bc9d6952c423b642625cd761b17b819181dcc24062ced9ec8bbb0dec93fae865daac8ab8803dddd2dfa66383d1300deccb6272e011428e7af213bb321aadafd57b5e9230a6d68f38e1dfba0a8839212b6cfc8630ca30ad953eb1ac3de92c760126d9c1147f49ac3e770060838dc54ecf027dfb0c94676d389cf542d0f1af7e3f94ba17384e5927d15342039b1cb1562b2a64e8f72500c0686c495fab07a1d292e3c9fb78db5af0281c78b8a8a5651d1765e864d29b3ff618d5e7e9d75e67b9bfdd77dc3c3222dbcd10945362febac761c42c7e55a6dbe683d5e590d8d3605d34545ddb5b75ee0e6bcb0a808d965b358cc43878ece74f971aecf969b37c3c5938f10095587d3fe6c51f9bcfce1c8789a2610403906b6e509859fc17a570591aaebf255be50d0b126503c44344a93ecbb8827e0d3d29ec10c48ae22100542088a1c704d000452988d595848d4c182a1c12f7b43a160859795e840035a039d64bccf4271fdd2eeec0db7ef8d896b5782534d6a7c22ccdf79e41849417c4775da8d9b7ca190723f69784858b6dd5176dd19913301559727acba70f1c6225ee978e04928f22a6e85e2f50c94f91d6751edf08d2d70a8d7b860aff7dd9fc466fa96747575b5b71357ae5caba0a0aa81d29dee6764efa5af6da093187d6fb9a3abd9145de5c9534c5cf4a7cf35c238a09494d5e5642746444442a25a1eb0166be87afdfa4dc944a28fee1b366c9ee1b2c2cbf387518b0e0955f75ec5e0c64b5e55fc2d80bc643965cf81af415eb311f21679f53fba76ef27a8ea8b87483041bb73c79eaeedbb88e3a1aa56eddaba8b72e0a018d40307bb76ec2679ccc54f5017c72b3c94e67e8ba50a08f6ecef58ba8aa086927ef5689f6adab1e700c96f11dc11af6944ddb59fb26d2f4e45073c12ae0261380d3465e7feee5dfb085a9fb7748b763ac8ad3f0d54c9075cb1d874e4e5134b3143823285c6a289c79f606dee3a8d0bf9e6470a31a0a6805c554aaa179be96be9ebeba35028e01fd0cececebe783168c18225d6d6d30302d69e397bfe847fc0652797b336b6eae3356464264a203be1e0c143b0368189e98e33a64c32a8a9a911cf2696828202638cb331c689486c97740d130955afdea682eda46f0b10a5fa51801466c8516ccd2f86004041b4c0914fbda253088c62206df0bca181c88210774a818c123d83e82e621d4dd1375f64385c1595a0e2a378720da83c110f46b656926901f3f74e9fb8e9d7d527364645bbf7164fe1558c1b2857ccc8d59a1367ab14ea21712349c41b0340d5ecf7d451763f4012954a1d2da3085b5b3fad5ab51ab2d1e489ba9ed6b3cc3056e046323213a46c79787833994c505db860b1bcdca49cdc1c68676666a5a63e85b4f7f4e9534d75ac9686090e87174df88548a86aab2a2420b96aa4e9218e8de891da51daf81686bed4fdf7e0fb679bb3cff96aaa19bf4c8157a6c02c1d9ffe42db31da715ca8a74ce86c19281c4652f22d7829867bbdc25789cd241588e2341a4d72329a80c7c4c4dc73717655569e68616175e8d06173332b295532322a81819b41272c2c5c565665c78e5dd09e3f7f919ccc445555ddf1e3d51415d42d2c6cc1f324d30d130955e4cad24f3afa2ddafaf55a7a9f7450ad5a069fb40d1a0dd09f74f59b74a6966331ef0d0c6a5006454606af4cd1d52854f134d4633b837c23bd070e9847f6e8b0d92657fd4cc2174e8b9a6978d9d738dcdd38c10d73d7cd30dcdd28c61513eb824e7031bced8e05e53077a32857c30b3ea627179a9ff4b7b830cf3478b6f1356f93233f98ffb1d8fcdc3cb33fe6989e5a607ed1cf24d4c338cac5f0be0326643636ce059de888cab332c8b03028414d7d61a2578099fa0633f5b5a1deb369a8744b548a1dfa95915e8191fe2bc3a9bbd759fd916ad45838e94a9a01f6b6ebf7fcbd635428867927d6e58acd24153a9d3eaa1d47485353534040407d3d123fdddc3c865135514e4e25333393c1604c9d8a5151d12093c9f1f1f1f272ca6222274fd6cccbcb134f324224540d7007f89c01c1006780cd827d2b854e61f7337b19f46e06a5bd8744a093a80c4a69fbfbea8e8642625509aea2045ff9acad38a5e965c4fbd4d80f19aff195cf7165c5f8aa8c96e25cfcbbf79dcdefbb9a3e52db4ac97585c4f739b8b2078d7999ad25af8955651df51f282d7514dc6b62f58daae4f886dca486fcf4d6a28cd622d0496a7ef9a4b920be2e27aa36e37a555256dbdb94e682d8baec5b3569372a9323df3fb959959c589715539b9e509f1d5b97155c9572adf2c11fa5f782de2542fbeabba49b95c9ab328edb26fec332769de1bd554631ab4c62d71adf5b6597f893e3fd2d0ef7b7cc7cb8cb2d79c7b4b80dd3e23798dc5b6b1cb3c622769dfdfdcd36898176f77f0205eb848dd8d8b5705c917532af6de4e75a2e97dbdbdb2b391953a4a5c10c1155b2b293a46cd9db4f87922d2424545646e5c0815f40b3acacecc2f98b21c1a1636c842554fd5f12be4008d52980377484ba112a49d8320b85a21fb0131c4457c50de8472e0d01190895279bf9893e4a7a874425fe2b94e4fcdf0978959cdce40913b4a5544132cbcfcf07d62dadecc0b1bee78ffd20ff6354312aaba1ce16b7e1b57babaaa5ef0ea6ecadac969c88046cfdb8e1454d77f3f71b0811445788a793ef37bca0b3fbc0a773dbca603ff0f514a34e0a6cf5f48f6e1c280120637de7bf3ab230b719afa4a9a66a28a50a02ddce9dc83f83494a4a828c75e9529058736cf91ba91222140c9341a448457e110848078fc28a1eea1010915338172d70be80f2380d2c2ab928143079fd13427c7f2bba03761eea14ff2080d421ed43ce252da409ff3d6b29b24e08aca7e216a51f727ab865687dc00fe41cd0438e085788b67820720ff17de07944caa3085c05f7929c7c5b60d9e9ea1829296a686b990ff184444213134b98011c4b4717e5eb3b4fa23da6fc8d54f105bcce6b215da72f74fcfa3bf5ce5dd6c7ba8ea3c7c9bffd41894f0432dab7ee229f3c4bfaed34253e49c0e3b76edf493af527e9f8194a6c0297cfeb8849a4171433f2f2209a51621329cd75e343fde63dfee7cce45d4bd38f9198d4aa8ec695cf7ebf52fe6045fabf3ef6e09765fe0b32cdc2d47f967536107a3bd767ff6e7f7fabffd323955d4d8584ea3599c77174f2a2b4c34e49c81f6be0d98090762afd50d4f3e3f1f9a1e9a54049c2abea90671589af3f64bd6bfe3526ef645cfed52785b098c4eff2b5c0e6575c768f2d0d0d0dbadac6f27253f474ad81210d75635d9d69d09093531657920b17fa9b9858016d62fd31e46ff52a64e9f1b95ce2cf47d8787c67582497d10b34b4efd8076badd5cd8fcb62c0e2251d3bd5df866f99e5cb63d0f98342f2f133ecd636d22f47612061d3367afa33e2f1934c2e1ba8b24e581f52993c296cceae1741d92d25b2619e66f756ed7979f95c69ecd2b423c5e41ae3d855abb34e9d2e8e5208f1896fc8d9957fe552456242438e5ca8477577f3975409f7476475d021e5086ea69514d4e2375c4e7ff5e1138bc3d91e9c060cb1385ccfc3516378d5774a6a6a2a4acf126a0a037d3b389a63678e1ba7aaa4a40105456969193cc6cc599ece4eb324da63cadf9babe0513a2f5e61be29064a98d595e4d317bb2e5dc1f9af86a843de7318893c90b4d2b2fb32b3daf71e4462cea0b03733bb2f3db3fd97a370caaeab6f4159f2a1b0e521549d29bd0786f648dee39eb2334b4455daa722e8c9c397ff907ecc367693ca2dbf6519c74a4875e6b1eb94827d4d6357dfae4d4b04aa423cab295f5005b7de1791053c41bb9144b99e5aba2f2213eedfd2410d7a54843cf7a0706f44e67f95a8c1c1fdfbf7630ceca0ac30d0b791959d6c3dcd6b280c4e4c4949292e2e9697573e71f294447b4cf91ba9025bf73e4ea544c5f0e0bd0502e2b67d5c563f07425fe07628b2dafc7f44befe090729d7c35995956dfecb91e20c4ec322991595401597c727ed3b4889b8db75e9529fc8ab96a5ff06b14ef7f6920dcf7f87d25f366cf66b7c15d46ab689816e0f7774f4d32c62d72fcbf835b9e9e589e2dbb53dad8e895bad13d727d603555ec3a9eae7c27df9db8233383c78b4c1d4b2fae43775fb239fc333330778db82d3f9023e9bcbf1fa350abc5cfc2e7f4df6ef3f8036b034c3ce5451d6d7d632830ac2ce66ce10559302962f5757d7717470edebeb930c185324ffbaf6ef102e8dde34d3b7f3ecc5ce7397bae3933a4efed11574937cfa4fc2c6ad8c8aca960d9b3b4e9ca55c0f6b3ffa1b9fc76dddb89574fc34f54658fbe17ff1793cc2f1d39d89c9b4e42760d3ae33e7c9256ff46f05d8256e9c10ec83ba13f0aeb3096a39addb8b8a083540efbefcabcaa13e0eb11bcd63d7fcf0f47061fb0783a8653ab7fc556fcd0fae4c49697ca97d6b316ce656669ef049f91916c4eaf3f77942feeb8ff8bd6119c169253b4333d85cdeb1981ca005dce9e19b8f87a3727ebb97bbee728ab446fd0b023ba42993742d4cdd21e24dd5b1b43073b7b39a6b63e52b2b2a2ba008545656dbbbf700eca92503fe9d48fecdfadf214845c7e50a785c380a791c1e9fc7ee2071fb99506ef0810d3867b1389d9db08491fd0d9fc7e9474e79c8c77c219f0f498d0b0d9807ca6b18c041bef00b3afa7b58dc01e8068606a0381199128693993dbddc7e2e6446d829c1250187c4e8861ec47d8442180b9ac83cc89910e611959afc7ece0099c6e043e720f20ce2a9c2b3cb6010ccb3f9469a3842fe35e17038b7226e2f59bc4247c7d808ed688c9e3e79b29e9cfc44acb165e0c62df713937a7ac6fa40f5b548fe4f90ff17b10037f1f955bfc6be387027fbc5fb16e8905cf82f086cc21a1b1b6b6b6b9b9a9abef34bc7283238f81fb545f224b0b693270000000049454e44ae426082");
    $logo_zbxe_post = "decode('{$logo_zbxe}' , 'hex')";

require_once('include/config.inc.php');
require_once('include/zbxe_visual_imp.php');

echo "Banco de dados selecionado: ".$DB['DATABASE']."<br>";
try {	
    $query = 'select count(*) as total from zbxe_translation';
    $total = 0;
    $result     = DBselect($query);
    while($row  = DBfetch($result)){
        $total  = intval($row['total']);
        echo "<br>Processo de upgrade...";
    }
} catch(Exception $erro) {
    $criar_tabelas = "S";
    echo "<br>Tabelas ainda não existem..." . $erro->getMessage();
}

function dmlPadrao ($query) {
    global $DB;
    if ($DB['TYPE'] == ZBX_DB_POSTGRESQL) {
        $query = str_replace('varchar', 'character varying', $query);
        $query = str_replace('int', 'integer', $query);
        $query = str_replace('`', '', $query);
    }
    return $query;
}

if ($total !== 0) {
    try {	
        $_REQUEST['p_modo_install'] = getRequest('p_modo_install');
        if ($_REQUEST['p_modo_install'] == "S") {
            echo "Criar tabelas...<br>";
            preparaQuery('drop table zbxe_translation');
            preparaQuery('drop table zbxe_preferences');
            $total = 0;
            echo "Tabelas criadas...<br>";
        }
    } catch(Exception $erro) {
        echo "Instalação limpa." . $erro->getMessage();
    }
}
if ($total == 0) {
    $query = "CREATE TABLE zbxe_translation (
      `lang` varchar(255) NOT NULL,
      `tx_original` varchar(255) NOT NULL,
      `tx_new` varchar(255) NOT NULL
    ) ";// ENGINE=InnoDB DEFAULT CHARSET=utf8;
    echo "<br>Criando zbxe_translation...<br>";
    preparaQuery(dmlPadrao($query));

    $query = "CREATE TABLE zbxe_preferences (
      `userid` int NOT NULL,
      `tx_option` varchar(60) NOT NULL,
      `tx_value` varchar(255) NOT NULL,
      `st_ativo` int NOT NULL
    )";
    echo "<br>Criando zbxe_preferences...<br>";
    preparaQuery(dmlPadrao($query));
    echo "Populando dados padrões em zbxe_translation...<br>";
    // Translation -------------------------------------------------------------
    
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Amount', 'Amount')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Analysis', 'Analysis')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Application', 'Application')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Avg', 'Avg')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Border', 'Border')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Capacity and Trends', 'Capacity and Trends')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Chart', 'Chart')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Color', 'Color')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Company', 'Company')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Correlate', 'Correlate')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Data from history', 'Data from history')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Data', 'Data')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Day', 'Day')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Delete User Personalization', 'Delete User Personalization')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'English String', 'English String')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Enter the parameters for research!', 'Enter the parameters for research!')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Event Management', 'Event Management')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Extras - Default', 'Extras - Default')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Extras', 'Extras')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Format', 'Format')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Formatting', 'Formatting')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Geolocation', 'Geolocation')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'History Costs', 'History Costs')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'HS Tree', 'HS Tree')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Instant', 'Instant')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Maps', 'Maps')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Max', 'Max')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Min', 'Min')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Month', 'Month')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'No events related to the event source or without events compatible with the filter informed.', 'No events related to the event source or without events compatible with the filter informed.')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Not Supported Items Report', 'Not Supported Items Report')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Not Supported Items', 'Not Supported Items')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Number of Incidents', 'Number of Incidents')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Possible cause.', 'Possible cause.')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Possible consequence.', 'Possible consequence.')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Projection', 'Projection')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Related incidents', 'Related incidents')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Report generated on', 'Report generated on')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'rows', 'rows')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Storage Costs', 'Storage Costs')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Translate', 'Translate')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Translation for', 'Translation for')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Trend', 'Trend')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Trends Costs', 'Trends Costs')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Type', 'Type')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Update Filter', 'Update Filter')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Value', 'Value')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'View', 'View')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'VPS', 'VPS')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Week', 'Week')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('en_GB', 'Year', 'Year')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Amount', 'Nombre')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Analysis', 'Analyse')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Application', 'Application')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Avg', 'Moyenne')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Border', 'Bordure')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Capacity and Trends', 'Capacité et Tendances')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Chart', 'Graphique')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Color', 'Couleur')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Company', 'Entreprise')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Correlate', 'Corrélation')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Data from history', 'Historique des données')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Day', 'Jour')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Delete User Personalization', 'Supprimer la personnalisation de l\'utilisateur')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'English String', 'Chaîne en Anglais')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Enter the parameters for research!', 'Entrez les paramètres pour la recherche !')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Event Management', 'Observateur d\'événements')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Extras - Default', 'Extras - Défaut')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Extras', 'Extras')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Format', 'Format')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Formatting', 'Formattage')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Geolocation', 'Géolocalisation')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'History Costs', 'Historique des coûts')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'HS Tree', 'Arbre des Services')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Instant', 'Instant')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Maps', 'Cartes')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Max', 'Max')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Min', 'Min')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Month', 'Mois')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'No events related to the event source or without events compatible with the filter informed.', 'Aucun des événements liés à la source de l\'événement ou d\'événements compatibles avec le filtré indiqué.')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Not Supported Items Report', 'Rapport des éléments non supportés')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Not Supported Items', 'Eléments non supportés')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Number of Incidents', 'Nombre d\'incidents')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Possible consequence.', 'Conséquence possible.')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Projection', 'Projection')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Related incidents', 'Incidents en relation')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Report generated on', 'Rapport généré sur')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'rows', 'lignes')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Storage Costs', 'Coût du stockage')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Translate', 'Traduction')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Translation for', 'Traduction pour')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Trend', 'Tendance')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Trends Costs', 'Coût des tendances')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Type', 'Type')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Update Filter', 'Mise à jour du filtre')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Value', 'Valeur')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'View', 'Vue')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'VPS', 'NPS')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Week', 'Semaine')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('fr_FR', 'Year', 'Année')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Amount', 'Qtd')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Analysis', 'Análise')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Avg', 'Med')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Border', 'Borda')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Capacity and Trends', 'Capacidade e tendência')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Chart', 'Gráfico')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Color', 'Cor')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Company', 'Empresa')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Correlate', 'Correlacionar')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Data from history', 'Dados do histórico')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Day', 'Dia')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Delete User Personalization', 'Remover personalização do usuário')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'English String', 'Texto Original')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Enter the parameters for research!', 'Informe parâmetros para a pesquisa!')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Event Management', 'Correlacionamento')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Extras - Default', 'Extras - Default')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Extras', 'Extras')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Format', 'Formato')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Formatting', 'Formatação')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Geolocation', 'Geolocalização')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'History Costs', 'Custo - Histórico')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'HS Tree', 'Árvore')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Instant', 'Momento')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Maps', 'Mapas')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Max', 'Max')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Min', 'Min')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Month', 'Mês')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Not Supported Items Report', 'Relatório de itens não suportados')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Not Supported Items', 'Itens não suportados')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Projection', 'Projeção')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Report generated on', 'Relatório gerado em')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'rows', 'linhas')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Storage Costs', 'Custos de Armazenamento')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Translate', 'Tradução')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Translation for', 'Tradução para')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Trend', 'Tendência')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Trends Costs', 'Custo - Médias')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Type', 'Tipo')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Update Filter', 'Atualizar Filtro')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Value', 'Valor')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'View', 'Visão')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'VPS', 'VPS')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Week', 'Semana')");
preparaQuery("INSERT INTO zbxe_translation (lang, tx_original, tx_new) VALUES('pt_BR', 'Year', 'Ano')");



    // Preferences -------------------------------------------------------------

    echo "Populando dados padrões em zbxe_preferences...<br>";
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'map_title_show', '1', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'map_title_color', '555555', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'map_border_show', '1', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'map_background_color', 'FFFF99', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'map_border_color', '000044', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'map_date_color', 'FF3333', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'map_company', 'Zabbix-Extras 2', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'logo_company', 'zbxe_logo', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'menu_01_cat', 'zbxe-cat|Capacity and Trends', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'menu_02_em', 'zbxe-em|Event Management', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'menu_03_ns', 'zbxe-ns|Not Supported Items', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'menu_04_sc', 'zbxe-sc|Storage Costs', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'menu_09_arvore', 'zbxe-arvore|HS Tree', '1')");
preparaQuery("INSERT INTO zbxe_preferences (userid, tx_option, tx_value, st_ativo) VALUES('0', 'menu_09_geo', 'zbxe-geolocation|Geolocation', '1')");

} else {
    // Modo de upgrade somente -----------------------------------------------------
    echo "<br>Banco ja inicializado! Serao inseridas apenas linhas complementares...<br>";
}

// Verificando se e uma estrutura com NODES
    $node = intval(valorCampo ('select count(*) as total from nodes', 'total'));
    //var_dump($node);
    if ($node > 0) {
        echo "Sem suporte a node para a importação de imagens em node ainda...";
    } else {
        $query = "select nextid+1 as nextid from ids "
           . "where table_name = 'images' and field_name = 'imageid' and nodeid = $node";
        $idAtual = intval(valorCampo($query,'nextid'));
        if ($idAtual == 0) {
            $query = "select max(imageid)+1 as nextid from images ";
            $idAtual = intval(valorCampo($query,'nextid'));
        }
        if (valorCampo("select imageid from images where name = 'zbxe_logo'", 'imageid') == 0) {
            echo "Inserindo logotipo personalizado [$idAtual]...<br>";
            // Logotipo personalizado do ZE + Zabbix Brasil
            $query = "INSERT INTO images (imageid, imagetype, name, image) "
                   . "VALUES ($idAtual, 1, 'zbxe_logo', ".
                    ($DB['TYPE'] == ZBX_DB_POSTGRESQL ? $logo_zbxe_post : "0x".$logo_zbxe).");";
            preparaQuery($query);
            $query = "update ids set nextid = $idAtual where table_name = 'images' " 
                . "and field_name = 'imageid' and nodeid = $node;";
            preparaQuery($query);
        } else {
            echo "Atualizando logotipo personalizado...<br>";
            $query = "update images set image = ".
                    ($DB['TYPE'] == ZBX_DB_POSTGRESQL ? $logo_zbxe_post : "0x".$logo_zbxe)
                    ." where name = 'zbxe_logo';";
            preparaQuery($query);
        }
        
       
    }
    
echo "Pronto !!!";
